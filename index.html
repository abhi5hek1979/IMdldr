<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Downloader</title>
    <style>
        /* Basic Styling to ensure visibility */
        body {
            background-color: white;
            color: black;
            padding: 20px;
            font-family: sans-serif;
        }
        input {
            display: block;
            width: 90%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid black;
        }
        button {
            padding: 15px;
            background-color: blue;
            color: white;
            font-size: 18px;
            border: none;
            width: 100%;
        }
        img {
            max-width: 100%;
            margin-top: 20px;
            display: none; /* Hidden until loaded */
            border: 2px solid black;
        }
    </style>
</head>
<body>

    <h1>Image Downloader</h1>
    
    <label>Paste URL:</label>
    <input type="text" id="urlInput" placeholder="Paste link here...">

    <label>File Name:</label>
    <input type="text" id="fileName" placeholder="image-name">

    <button id="downloadBtn">Download Now</button>
    
    <p id="statusMessage"></p>

    <img id="previewImg" src="" alt="Preview">

    <script>
        // We wrap code in this event listener to ensure page is fully loaded first
        document.addEventListener("DOMContentLoaded", function() {
            
            const urlInput = document.getElementById('urlInput');
            const fileNameInput = document.getElementById('fileName');
            const downloadBtn = document.getElementById('downloadBtn');
            const statusMessage = document.getElementById('statusMessage');
            const previewImg = document.getElementById('previewImg');

            // Show preview
            urlInput.addEventListener('input', function() {
                if(urlInput.value) {
                    previewImg.src = urlInput.value;
                    previewImg.style.display = 'block';
                }
            });

            // Download logic
            downloadBtn.addEventListener('click', function() {
                const url = urlInput.value;
                let name = fileNameInput.value || 'download';

                if (!url) {
                    alert("Please paste a URL first");
                    return;
                }

                statusMessage.innerText = "Downloading...";
                
                fetch(url)
                    .then(response => response.blob())
                    .then(blob => {
                        const link = document.createElement('a');
                        link.href = URL.createObjectURL(blob);
                        link.download = name + ".jpg";
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        statusMessage.innerText = "Done! Check downloads.";
                    })
                    .catch(err => {
                        statusMessage.innerText = "Error: Website blocked the download.";
                        alert("Error: This website prevents direct downloads.");
                    });
            });

        });
    </script>

</body>
</html>
